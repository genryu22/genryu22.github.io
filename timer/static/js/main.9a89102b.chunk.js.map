{"version":3,"sources":["reducers.js","sagas.js","components/timer.js","App.js","index.js"],"names":["initialState","time","startTime","stopTime","running","tick","updateTime","reset","syncLocalStorage","rootSaga","put","type","delay","select","state","Math","floor","Date","now","actionChannel","tickChannel","take","resetChannel","t","fork","localStorage","removeItem","setItem","getItem","Number","tickTask","cancel","useSize","React","useState","width","height","size","setSize","ref","useCallback","node","rect","getBoundingClientRect","window","addEventListener","padding","a","b","a_temp","slice","b_temp","reverse","result","i","max","length","push","connect","dispatch","init","start","stop","props","useEffect","document","onkeypress","e","keyCode","ratio","fontSize","useFontSize","fontstyle","useHeight","heightstyle","buttonref","values","className","style","map","value","index","key","split","String","join","zeroPadding","onClick","App","sagaMiddleware","createSagaMiddleware","store","createStore","action","applyMiddleware","run","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9a89102b.chunk.js","sourcesContent":["const initialState = {\n\ttime: 0,\n\tstartTime: null,\n\tstopTime: null,\n\trunning: false,\n}\n\nexport default function rootReducer(state=initialState, action) {\n\tswitch (action.type) {\n\t\tcase 'START_TIME':\n\t\t\treturn { ...state, startTime: action.time }\n\t\tcase 'TIME':\n\t\t\treturn { ...state, time: action.time }\n\t\tcase 'STOP_TIME':\n\t\t\treturn { ...state, stopTime: action.time }\n\t\tcase 'SET_IS_RUNNING':\n\t\t\treturn { ...state, running: action.running }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}","import { put, delay, take, actionChannel, select, fork, takeLatest, cancel, race } from 'redux-saga/effects'\n\nfunction* tick() {\n\twhile (true) {\n\t\tyield put({ type: 'TICK' })\n\t\tyield delay(500)\n\t}\n}\n\nfunction* updateTime() {\n\tconst startTime = yield select((state) => state.startTime)\n\tyield put({ type: 'TIME', time: Math.floor((Date.now() - startTime) / 1000) })\n}\n\nfunction* time() {\n\tconst tickChannel = yield actionChannel('TICK')\n\twhile (true) {\n\t\tyield take(tickChannel)\n\t\tyield* updateTime()\n\t}\n}\n\nfunction* reset() {\n\tconst resetChannel = yield actionChannel('RESET')\n\twhile (true) {\n\t\tyield take(resetChannel)\n\t\tconst { running } = yield select()\n\t\tconst t = Date.now()\n\t\tif (running) {\n\t\t\tyield put({ type: 'START_TIME', time: t })\n\t\t\tyield put({ type: 'STOP_TIME', time: null })\n\t\t} else {\n\t\t\tyield put({ type: 'START_TIME', time: t })\n\t\t\tyield put({ type: 'STOP_TIME', time: t })\n\t\t\tyield put({ type: 'TIME', time: 0 })\n\t\t}\n\t}\n}\n\nfunction* syncLocalStorage() {\n\tyield fork(function* () {\n\t\twhile (true) {\n\t\t\tconst { time } = yield take('STOP_TIME')\n\t\t\tif (time == null) {\n\t\t\t\tlocalStorage.removeItem('stop_time')\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem('stop_time', time)\n\t\t\t}\n\t\t}\n\t})\n\n\tyield fork(function* () {\n\t\twhile (true) {\n\t\t\tconst { time } = yield take('START_TIME')\n\t\t\tif (time == null) {\n\t\t\t\tlocalStorage.removeItem('time')\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem('time', time)\n\t\t\t}\n\t\t}\n\t})\n}\n\nexport default function* rootSaga() {\n\tyield* syncLocalStorage()\n\tlet startTime = localStorage.getItem('time')\n\tlet stopTime = localStorage.getItem('stop_time')\n\tlet t\n\tif (stopTime != null) {\n\t\tstartTime = Number(startTime)\n\t\tstopTime = Number(stopTime)\n\t\tt = stopTime - startTime\n\t} else {\n\t\tconst now = Date.now()\n\t\tif (startTime == null) {\n\t\t\tstartTime = now\n\t\t} else {\n\t\t\tstartTime = Number(startTime)\n\t\t}\n\t\tt = now - startTime\n\t}\n\tyield put({ type: 'TIME', time: Math.floor(t / 1000) })\n\n\tif (stopTime != null) {\n\t\tyield take('START')\n\t}\n\tyield put({ type: 'START_TIME', time: Date.now() - t })\n\tyield put({ type: 'STOP_TIME', time: null })\n\tyield put({ type: 'SET_IS_RUNNING', running: true })\n\t\n\tlet tickTask = yield fork(tick)\n\tyield fork(time)\n\tyield fork(reset)\n\n\twhile (true) {\n\t\tyield take('STOP')\n\t\tyield put({ type: 'STOP_TIME', time: Date.now() })\n\t\tyield put({ type: 'SET_IS_RUNNING', running: false })\n\t\tyield cancel(tickTask)\n\n\t\tyield take('START')\n\t\tconst { stopTime, startTime } = yield select()\n\t\tyield put({ type: 'START_TIME', time: Date.now() - (stopTime - startTime) })\n\t\tyield put({ type: 'STOP_TIME', time: null })\n\t\tyield put({ type: 'SET_IS_RUNNING', running: true })\n\t\ttickTask = yield fork(tick)\n\t}\n}","import React from 'react'\nimport { connect } from 'react-redux'\n\nconst Timer = (props) => {\n\tReact.useEffect(() => {\n\t\tdocument.onkeypress = (e) => {\n\t\t\tif (e.keyCode === 32) {\n\t\t\t\tif (props.running) {\n\t\t\t\t\tprops.stop()\n\t\t\t\t} else {\n\t\t\t\t\tprops.start()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn () => {\n\t\t\tdocument.onkeypress = null\n\t\t}\n\t}, [props.running])\n\n\tconst [ fontstyle, ref ] = useFontSize()\n\tconst [ heightstyle, buttonref ] = useHeight(0.3)\n\n\tlet time = props.time\n\tlet values = []\n\twhile (time > 0) {\n\t\tvalues.push(time % 60)\n\t\ttime = Math.floor(time / 60)\n\t}\n\tvalues.reverse()\n\tvalues = padding([0, 0, 0], values)\n\n\treturn (\n\t\t<div className='TimerContainer' ref={ref}>\n\t\t\t<div className='Timer' style={fontstyle(0.2)}>\n\t\t\t\t{values.map((value, index) => (\n\t\t\t\t\t<span key={index}>{(index > 0 ? ':' : '') + zeroPadding(value)}</span>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<button ref={buttonref} onClick={props.reset} style={{...fontstyle(0.06), ...heightstyle}}>reset</button>\n\t\t\t{props.running ?\n\t\t\t\t(<button onClick={props.stop} style={{...fontstyle(0.06), ...heightstyle}}>stop</button>):\n\t\t\t\t(<button onClick={props.start} style={{...fontstyle(0.06), ...heightstyle}}>start</button>)}\n\t\t</div>\n\t)\n}\n\nfunction useSize() {\n\tconst [size, setSize] = React.useState({width: 0, height: 0})\n\tconst ref = React.useCallback(node => {\n\t\tif (node !== null) {\n\t\t\tconst rect = node.getBoundingClientRect()\n\t\t\tsetSize({width: rect.width, height: rect.height})\n\t\t\twindow.addEventListener('resize', () => {\n\t\t\t\tconst rect = node.getBoundingClientRect()\n\t\t\t\tsetSize({width: rect.width, height: rect.height})\n\t\t\t})\n\t\t}\n\t}, []);\n\treturn [size.width, size.height, ref]\n}\n\nfunction useHeight(ratio) {\n\tconst [width, height, ref] = useSize()\n\tconst style = {\n\t\theight: width * ratio\n\t}\n\treturn [style, ref]\n}\n\nfunction useFontSize() {\n\tconst [width, height, ref] = useSize()\n\tconst style = (ratio) => ({\n\t\tfontSize: width * ratio\n\t})\n\treturn [style, ref]\n}\n\nfunction padding(a, b) {\n\tlet a_temp = a.slice()\n\tlet b_temp = b.slice()\n\ta_temp.reverse()\n\tb_temp.reverse()\n\tlet result = []\n\tfor (let i = 0; i < Math.max(a.length, b.length); ++i) {\n\t\tresult.push(i < b.length ? b_temp[i] : a_temp[i])\n\t}\n\tresult.reverse()\n\treturn result\n}\n\nfunction zeroPadding(value, digit=2) {\n\treturn padding('00'.split(''), String(value).split('')).join('')\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\ttime: state.time,\n\t\trunning: state.running \n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tinit: () => dispatch({ type: 'INIT_TIME'}),\n\t\treset: () => dispatch({ type: 'RESET' }),\n\t\tstart: () => dispatch({ type: 'START' }),\n\t\tstop: () => dispatch({ type: 'STOP' }),\n\t}\n}\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n)(Timer)","import React from 'react';\nimport './App.css';\nimport Timer from './components/timer'\n\nfunction App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Timer />\n\t\t</div>\n\t);\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport createSagaMiddleware from 'redux-saga'\nimport rootReducer from './reducers'\nimport rootSaga from './sagas'\nimport './ress.css'\nimport './index.css';\nimport App from './App';\n\nconst sagaMiddleware = createSagaMiddleware()\n\nconst store = createStore(\n\trootReducer,\n\tapplyMiddleware(sagaMiddleware)\n)\n\nsagaMiddleware.run(rootSaga)\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root'))"],"sourceRoot":""}